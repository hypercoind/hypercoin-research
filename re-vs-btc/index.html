<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate vs Portfolio Investment Comparison</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <button class="theme-toggle" id="theme-toggle">‚òÄÔ∏è Light</button>
            <h1>Real Estate or BTC?</h1>
            <p>Compare real estate investments with volatility-matched Bitcoin portfolios using US median market data</p>
        </header>

        <div class="input-section">
            <div class="real-estate-inputs">
                <h2>Real Estate Investment</h2>
                <div class="input-group">
                    <label for="property-price">Property Price ($)</label>
                    <input type="number" id="property-price" value="435000" min="0">
                </div>
                <div class="input-group">
                    <label for="down-payment">Down Payment ($)</label>
                    <input type="number" id="down-payment" value="87000" min="0">
                </div>
                <div class="input-group">
                    <label for="interest-rate">Mortgage Interest Rate (%)</label>
                    <input type="number" id="interest-rate" value="6.7" min="0" max="20" step="0.1">
                </div>
                <div class="input-group">
                    <label for="rental-yield">Annual Rental Yield (%)</label>
                    <input type="number" id="rental-yield" value="0" min="0" max="20" step="0.1">
                </div>
                <div class="input-group">
                    <label for="property-appreciation">Annual Property Appreciation (%)</label>
                    <input type="number" id="property-appreciation" value="4" min="0" max="20" step="0.1">
                </div>
                <div class="input-group">
                    <label for="maintenance-costs">Annual Maintenance/Costs (%)</label>
                    <input type="number" id="maintenance-costs" value="2" min="0" max="10" step="0.1">
                </div>
                <div class="input-group">
                    <label for="hoa-fee">Monthly HOA Fee ($)</label>
                    <input type="number" id="hoa-fee" value="0" min="0">
                </div>
            </div>

            <div class="portfolio-inputs">
                <h2>Investment Portfolio</h2>
                <div class="input-group">
                    <label for="initial-investment">Initial Investment ($)</label>
                    <input type="number" id="initial-investment" value="87000" min="0">
                </div>
                <div class="allocation-inputs">
                    <h3>Portfolio Allocation (%)</h3>
                    <div class="input-group">
                        <label for="btc-allocation">Bitcoin ETF</label>
                        <input type="number" id="btc-allocation" value="20" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label for="voo-allocation">VOO (S&P 500)</label>
                        <input type="number" id="voo-allocation" value="20" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label for="treasury-allocation">Treasuries</label>
                        <input type="number" id="treasury-allocation" value="20" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label for="strc-allocation">STRC (Strategy Corp)</label>
                        <input type="number" id="strc-allocation" value="20" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label for="hysa-allocation">High Yield Savings</label>
                        <input type="number" id="hysa-allocation" value="20" min="0" max="100">
                    </div>
                </div>
            </div>

            <div class="rent-inputs">
                <h2>Rent Compare</h2>
                <div class="input-group">
                    <label for="current-rent">Current Monthly Rent ($)</label>
                    <input type="number" id="current-rent" value="2075" min="0">
                </div>
                <div class="input-group">
                    <label for="rent-inflation">Annual Rent Inflation (%)</label>
                    <input type="number" id="rent-inflation" value="3.5" min="0" max="20" step="0.1">
                </div>
            </div>

            <div class="common-inputs">
                <h2>Analysis Parameters</h2>
                <div class="input-group">
                    <label for="time-horizon">Time Horizon (years)</label>
                    <input type="number" id="time-horizon" value="10" min="1" max="50">
                </div>
            </div>
        </div>

        <div class="controls">
            <button id="calculate-btn">Calculate & Compare</button>
            <button id="reset-btn">Reset to Defaults</button>
        </div>

        <div class="results-section" id="results" style="display: none;">
            <h2>Investment Comparison Results</h2>
            <div class="results-grid">
                <div class="result-card real-estate">
                    <h3>Real Estate Investment</h3>
                    <div class="result-item">
                        <span class="label">Total Investment:</span>
                        <span class="value" id="re-total-investment">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Final Property Value:</span>
                        <span class="value" id="re-property-value">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Total Rental Income:</span>
                        <span class="value" id="re-rental-income">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Net Worth:</span>
                        <span class="value" id="re-net-worth">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Annual Return:</span>
                        <span class="value" id="re-annual-return">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Monthly Payment:</span>
                        <span class="value" id="re-monthly-payment">$0</span>
                    </div>
                    
                    <button class="expand-details-btn" onclick="togglePaymentDetails()">üìä View Payment Breakdown</button>
                    
                    <div class="payment-details" id="payment-details" style="display: none;">
                        <div class="result-item">
                            <span class="label">Principal & Interest:</span>
                            <span class="value" id="re-principal-interest">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Property Tax:</span>
                            <span class="value" id="re-property-tax">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">Home Insurance:</span>
                            <span class="value" id="re-home-insurance">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">PMI:</span>
                            <span class="value" id="re-pmi">$0</span>
                        </div>
                        <div class="result-item">
                            <span class="label">HOA Fee:</span>
                            <span class="value" id="re-hoa-fee">$0</span>
                        </div>
                    </div>
                    
                    <div class="result-item">
                        <span class="label">Monthly Rent Savings:</span>
                        <span class="value" id="re-monthly-savings">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Total Rent Savings:</span>
                        <span class="value" id="re-total-savings">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Investment Volatility:</span>
                        <span class="value" id="re-volatility">0%</span>
                    </div>
                </div>

                <div class="result-card bitcoin-savings">
                    <h3>Bitcoin Savings Strategy</h3>
                    <div class="result-item">
                        <span class="label">Average Monthly BTC Investment:</span>
                        <span class="value" id="btc-monthly-savings">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Total BTC Investment:</span>
                        <span class="value" id="btc-total-investment">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Final BTC Portfolio Value:</span>
                        <span class="value" id="btc-final-value">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">BTC Portfolio Gain:</span>
                        <span class="value" id="btc-gain">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">BTC Annual Return:</span>
                        <span class="value" id="btc-annual-return">0%</span>
                    </div>
                </div>

                <div class="result-card portfolio">
                    <h3>Investment Portfolio</h3>
                    <div class="result-item">
                        <span class="label">Total Investment:</span>
                        <span class="value" id="portfolio-total-investment">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Final Portfolio Value:</span>
                        <span class="value" id="portfolio-value">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Net Gain:</span>
                        <span class="value" id="portfolio-gain">$0</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Annual Return:</span>
                        <span class="value" id="portfolio-annual-return">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Portfolio Volatility:</span>
                        <span class="value" id="portfolio-volatility">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="label">Optimized BTC Allocation:</span>
                        <span class="value" id="optimized-btc-allocation">0%</span>
                    </div>
                </div>
            </div>


            <div class="comparison-summary">
                <h3>Comparison Summary</h3>
                <div class="winner" id="winner-summary"></div>
                <div class="difference" id="difference-summary"></div>
                <div class="savings-summary" id="savings-summary"></div>
            </div>

            <div class="chart-container">
                <canvas id="comparison-chart" width="800" height="400"></canvas>
            </div>
        </div>

        <div class="help-section">
            <h2>üìö About This Calculator</h2>
            
            <div class="help-content">
                <div class="overview-card">
                    <h3>üéØ What It Does</h3>
                    <p>Compare three wealth-building strategies: <strong>real estate ownership</strong>, <strong>diversified investing</strong>, and <strong>Bitcoin savings</strong> (using rent vs. mortgage savings).</p>
                </div>

                <div class="instructions-card">
                    <h3>‚öôÔ∏è Quick Start</h3>
                    <ol>
                        <li>Adjust property price and down payment</li>
                        <li>Set portfolio allocation (must total 100%)</li>
                        <li>Enter your current rent</li>
                        <li>Choose time horizon and calculate</li>
                    </ol>
                </div>

                <div class="assumptions-card">
                    <h3>üìä Key Assumptions</h3>
                    <div class="assumptions-grid">
                        <div class="assumption-item">
                            <strong>Property:</strong> 4% annual appreciation, 2% maintenance costs
                        </div>
                        <div class="assumption-item">
                            <strong>Taxes:</strong> Not included - consult a tax professional
                        </div>
                        <div class="assumption-item">
                            <strong>Bitcoin:</strong> Modeled with decreasing volatility over time
                        </div>
                        <div class="assumption-item">
                            <strong>Portfolio:</strong> Based on historical asset performance
                        </div>
                    </div>
                </div>

                <div class="disclaimer-card">
                    <h3>‚ö†Ô∏è Disclaimer</h3>
                    <p><strong>Educational tool only.</strong> Results are projections, not guarantees. Real estate offers stability and tax benefits not captured here. Bitcoin is volatile. Consider your personal situation and consult professionals for major decisions.</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Theme Management - Initialize on page load
        const themeToggle = document.getElementById('theme-toggle');
        const body = document.body;
        
        // Function to apply theme
        function applyTheme(theme) {
            if (theme === 'light') {
                body.setAttribute('data-theme', 'light');
                themeToggle.innerHTML = 'üåô Dark';
            } else {
                body.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '‚òÄÔ∏è Light';
            }
        }
        
        // Check for saved theme preference or default to dark mode
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            applyTheme(savedTheme);
        } else {
            applyTheme('dark');
        }
        
        // Theme toggle functionality
        themeToggle.addEventListener('click', function() {
            const currentTheme = body.getAttribute('data-theme');
            
            if (currentTheme === 'light') {
                applyTheme('dark');
                localStorage.setItem('theme', 'dark');
            } else {
                applyTheme('light');
                localStorage.setItem('theme', 'light');
            }
            
            // Update chart colors if calculator is loaded and chart exists
            if (window.calculator && window.calculator.chart) {
                window.calculator.updateChartColors();
            }
        });
        
        // Handle theme from URL parameter (for carrying over from main page)
        const urlParams = new URLSearchParams(window.location.search);
        const themeParam = urlParams.get('theme');
        if (themeParam && (themeParam === 'light' || themeParam === 'dark')) {
            applyTheme(themeParam);
            localStorage.setItem('theme', themeParam);
            // Clean up URL by removing the theme parameter
            const newUrl = window.location.href.split('?')[0];
            window.history.replaceState({}, document.title, newUrl);
        }
        
        // Toggle payment details function
        function togglePaymentDetails() {
            const details = document.getElementById('payment-details');
            const button = document.querySelector('.expand-details-btn');
            
            if (details.style.display === 'none' || details.style.display === '') {
                details.style.display = 'block';
                button.innerHTML = 'üìä Hide Payment Breakdown';
            } else {
                details.style.display = 'none';
                button.innerHTML = 'üìä View Payment Breakdown';
            }
        }
        
        // Make function globally accessible
        window.togglePaymentDetails = togglePaymentDetails;
    </script>
    <script src="script.js"></script>
</body>
</html>